# Client maintainer: mathieu . malaterre  gmail . com

set(CTEST_CMAKE_GENERATOR "Unix Makefiles")
set(ENV{CC} /usr/bin/clang)
# set(ENV{CFLAGS} "-pedantic -Wconversion")
# https://code.google.com/p/openjpeg/issues/detail?id=255&start=100
set(ENV{CFLAGS} "-Wno-uninitialized -Wno-unused-parameter -Wall -Wcast-align -Wdisabled-optimization -Wextra -Wformat=2 -Winvalid-pch -Wno-format-nonliteral -Wpointer-arith -Wunused -Wwrite-strings -funit-at-a-time -Wno-strict-overflow")
set(ENV{JFLAGS} "-Xlint:deprecation")

macro(dashboard_hook_init)
  set( dashboard_cache "
  BUILD_TESTING:BOOL=ON
  BUILD_JPIP:BOOL=ON
  BUILD_JPIP_SERVER:BOOL=ON
  BUILD_THIRDPARTY:BOOL=OFF
    "
    )
endmacro(dashboard_hook_init)

# Filename convention is:
# ctestsite-branchname-model-configuration-buildname.ctest
get_filename_component(OPJ_CTEST_NAME ${CMAKE_CURRENT_LIST_FILE} NAME_WE)
include(${CTEST_SCRIPT_DIRECTORY}/openjpeg_common.cmake)
